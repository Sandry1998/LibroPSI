<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>LIBRERIA SANDRA</title>
    <link rel="icon" href="/images/book.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
</head>
<body>
<div class="container mt-5">
    <div class="card">
        <div class="card-header">DATOS DEL LIBRO</div>
        <div class="card-body">

            <table class="table">
                <tr>
                    <th>Titulo</th>
                    <th>Autor</th>
                    <th>Género</th>
                    <th>Editorial</th>
                    <th>Páginas</th>
                </tr>
                <tr>
                    <td th:text="${libro.titulo}"></td>
                    <td th:text="${libro.autor}"></td>
                    <td th:text="${libro.genero}"></td>
                    <td th:text="${libro.editorial}"></td>
                    <td th:text="${libro.paginas}"></td>


                </tr>
            </table>
        </div>
        <!-- Formulario para nuevo libro-->
        <div class="card mb-4">
            <div class="card-header">Ficha Libro</div>
            <div class="card-body">
                <form th:action="@{'/consulta/' + ${libro.id}}" th:object="${nuevoLibro}" method="post">
                    <input type="hidden" th:field="*{id}" />
                    <div class="mb-3">
                        <label for="fechaRecogida" class="form-label">Fecha de recogida</label>
                        <input type="date" class="form-control" id="fechaRecogida" th:field="*{fechaRecogida}" required>
                    </div>
                    <div class="mb-3">
                        <label for="fechaEntrega" class="form-label">Fecha de entrega</label>
                        <input type="date" class="form-control" id="fechaEntrega" th:field="*{fechaEntrega}" required></input>
                    </div>
                    <div class="mb-3">
                        <label for="estado" class="form-label">Estado</label>
                        <textarea class="form-control" id="estado" th:field="*{estado}"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="observaciones" class="form-label">Observaciones</label>
                        <textarea class="form-control" id="observaciones" rows="3" th:field="*{observaciones}"></textarea>
                    </div>
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-success">Guardar Historial</button>
                        <a th:href="@{/crud}" class="btn btn-success">Volver al Listado</a>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tabla de historial médico -->
        <div class="card">
            <div class="card-header">Historial</div>
            <div class="card-body">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>FECHA RECOGIDA</th>
                        <th>FECHA ENTREGA</th>
                        <th>ESTADO</th>
                        <th>OBSERVACIONES</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="hist : ${historial}">
                        <td th:text="${hist.fechaRecogida}"></td>
                        <td th:text="${hist.fechaEntrega}"></td>
                        <td th:text="${hist.estado}"></td>
                        <td th:text="${hist.observaciones}"></td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(historial)}">
                        <td colspan="4" class="text-center">Sin cambios registrados</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</body>
</html>